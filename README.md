# spring-cloud-study
Spring Cloud 学习案例记录<br/>
# 服务治理的运作
服务提供者<br/>
1.服务注册：服务提供者会在启动时，发送REST请求将自己注册到Eureka Server上，同时带上自身的一些元数据<br/>
2.服务同步：服务提供者将自己注册到某一个注册中心后，该注册中心会将该信息转发给其他注册中心，从而实现注册中心间的服务同步<br/>
3.服务续约：注册完成后，服务提供者会维护一个心跳用来告诉Eureka Server，以防止Eureka Server将该实例从服务列表中排除<br/>
服务消费者<br/>
1.获取服务：当消费者启动后，会向Eureka Server发送一个REST请求，来获取服务清单<br/>
2.服务调用：消费者获取到服务清单后，便可通过服务名获取服务提供者的实例名和元数据，根据这些信息来调用服务提供者实例<br/>
3.服务下线：当服务实例正常操作关闭操作时，会发送一个下线的REST请求通知Eureka Server，注册中心会将该实例状态标记为已下线，并把该事件传播出去<br/>
服务注册中心<br/>
1.失效剔除：当服务实例非正常关闭时，Eureka Server并未收到服务下线通知，为了将这些无法提供服务的实例剔除，Eureka Server会默认每隔一段时间（默认60s）将服务清单中超时（默认90s）未续约的实例剔除<br/>
2.自我保护：服务注册到Eureka Server后，会维护一个心跳，Eureka Server在运行期间会统计心跳比例，如果15分钟内低于85%，Eureka Server会将服务实例保护起来，让这些实例不会过期，但是，这期间如果实例出现问题，那么客户端很容易拿到实际已经不存在的服务实例，出现调用失败的问题，所以客户端必须有容错机制<br/>
